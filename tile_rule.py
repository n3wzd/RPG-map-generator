class Prob:

    def __init__(self, target, prob):
        self.target = target
        self.prob = prob


class Group:

    def __init__(self, target, dire):
        self.target = target
        self.dx = dire[0]
        self.dy = dire[1]


# Basic Tile ID List
blank = 0
floor = 1
wall = 2
ceil = 3
water = 4
cascade = 5
floor_cover = 6
water_cover = 7

# Normal Deco Tile Rule
gen_normal = {
    floor: [
        Prob(88, 0.01),
        Prob(89, 0.01),
        Prob(90, 0.01),
        Prob(91, 0.01),
        Prob(92, 0.0075),
        Prob(93, 0.0025),
        Prob(95, 0.002),
        Prob(96, 0.005),
        Prob(97, 0.005),
        Prob(98, 0.005),
        Prob(99, 0.005),
        Prob(100, 0.0025),
        Prob(102, 0.0025),
        Prob(103, 0.0025),
    ],
    wall: [
        Prob(192, 0.05),
        Prob(193, 0.05),
    ],
}

# Group Deco Tile Rule
gen_group = {
    93: [
        Group(101, (0, 1)),
    ],
    192: [
        Group(200, (0, 1)),
    ],
    193: [
        Group(201, (0, 1)),
    ],
}

# Deco Tile Layer Rule
layer_data = [2] * 9999
layer_data[92:95] = [3] * 4
layer_data[100:103] = [3] * 4

# Tile Automata
floor_automata = [
    [[1, 1, 1], [1, 2, 1], [1, 1, 1]],
    [[0, 1, 1], [1, 2, 1], [1, 1, 1]],
    [[1, 1, 0], [1, 2, 1], [1, 1, 1]],
    [[0, 1, 0], [1, 2, 1], [1, 1, 1]],
    [[1, 1, 1], [1, 2, 1], [1, 1, 0]],
    [[0, 1, 1], [1, 2, 1], [1, 1, 0]],
    [[1, 1, 0], [1, 2, 1], [1, 1, 0]],
    [[0, 1, 0], [1, 2, 1], [1, 1, 0]],
    [[1, 1, 1], [1, 2, 1], [0, 1, 1]],
    [[0, 1, 1], [1, 2, 1], [0, 1, 1]],
    [[1, 1, 0], [1, 2, 1], [0, 1, 1]],
    [[0, 1, 0], [1, 2, 1], [0, 1, 1]],
    [[1, 1, 1], [1, 2, 1], [0, 1, 0]],
    [[0, 1, 1], [1, 2, 1], [0, 1, 0]],
    [[1, 1, 0], [1, 2, 1], [0, 1, 0]],
    [[0, 1, 0], [1, 2, 1], [0, 1, 0]],
    [[2, 1, 1], [0, 2, 1], [2, 1, 1]],
    [[2, 1, 0], [0, 2, 1], [2, 1, 1]],
    [[2, 1, 1], [0, 2, 1], [2, 1, 0]],
    [[2, 1, 0], [0, 2, 1], [2, 1, 0]],
    [[2, 0, 2], [1, 2, 1], [1, 1, 1]],
    [[2, 0, 2], [1, 2, 1], [1, 1, 0]],
    [[2, 0, 2], [1, 2, 1], [0, 1, 1]],
    [[2, 0, 2], [1, 2, 1], [0, 1, 0]],
    [[1, 1, 2], [1, 2, 0], [1, 1, 2]],
    [[1, 1, 2], [1, 2, 0], [0, 1, 2]],
    [[0, 1, 2], [1, 2, 0], [1, 1, 2]],
    [[0, 1, 2], [1, 2, 0], [0, 1, 2]],
    [[1, 1, 1], [1, 2, 1], [2, 0, 2]],
    [[0, 1, 1], [1, 2, 1], [2, 0, 2]],
    [[1, 1, 0], [1, 2, 1], [2, 0, 2]],
    [[0, 1, 0], [1, 2, 1], [2, 0, 2]],
    [[2, 1, 2], [0, 2, 0], [2, 1, 2]],
    [[2, 0, 2], [1, 2, 1], [2, 0, 2]],
    [[2, 0, 2], [0, 2, 1], [2, 1, 1]],
    [[2, 0, 2], [0, 2, 1], [2, 1, 0]],
    [[2, 0, 2], [1, 2, 0], [1, 1, 2]],
    [[2, 0, 2], [1, 2, 0], [0, 1, 2]],
    [[1, 1, 2], [1, 2, 0], [2, 0, 2]],
    [[0, 1, 2], [1, 2, 0], [2, 0, 2]],
    [[2, 1, 1], [0, 2, 1], [2, 0, 2]],
    [[2, 1, 0], [0, 2, 1], [2, 0, 2]],
    [[2, 0, 2], [0, 2, 0], [2, 1, 2]],
    [[2, 0, 2], [0, 2, 1], [2, 0, 2]],
    [[2, 1, 2], [0, 2, 0], [2, 0, 2]],
    [[2, 0, 2], [1, 2, 0], [2, 0, 2]],
    [[2, 0, 2], [0, 2, 0], [2, 0, 2]],
    [[2, 0, 2], [0, 2, 0], [2, 0, 2]],
]

wall_automata = []
for i in range(16):
    wall_automata.append([
        (i >> 0) & 1 ^ 1,  # left
        (i >> 1) & 1 ^ 1,  # up
        (i >> 2) & 1 ^ 1,  # right
        (i >> 3) & 1 ^ 1,  # down
    ])

cascade_automata = []
for i in range(4):
    wall_automata.append([
        (i >> 0) & 1 ^ 1,  # left
        (i >> 1) & 1 ^ 1,  # right
    ])
